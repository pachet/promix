(function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){var Chain=require("./lib/Chain"),Promise=require("./lib/Promise"),handler=require("./lib/Handler"),types=require("./lib/types");function when(){var result=new Chain,args=Array.prototype.slice.call(arguments);if(args.length){result.and.apply(result,args)}return result}function join(failure,success){return function apply_fork(){var args=Array.prototype.slice.call(arguments),error=args.shift();if(error){return void failure(error)}return void success.apply(null,args)}}function fork(promise,callback){promise.then(function abstracted_callback(result){return callback(null,result)},callback)}function errorless(callback){return function errorless(){return callback.apply(null,[null].concat(arguments))}}function wrap(promise,value){return function(error,result){if(error){return void promise.reject(error)}return void promise.resolve(value||result)}}function invoke(){var promise,args=Array.prototype.slice.call(arguments),primary;if(typeof args[0]!=="function"){return succeed(args)}promise=new Promise;primary=args.shift();args.push(function abstracted_callback(error,result){if(error){return void promise.reject(error)}return void promise.fulfill(result)});primary.apply(null,args);return promise}function succeed(value){var promise=Promise();setTimeout(function(){return void promise.resolve(value)},0);return promise}function fail(reason){var promise=Promise();if(!(reason instanceof Error)){reason=new Error(reason)}setTimeout(function(){return void promise.reject(reason)},0);return promise}function compose(object){var chain=new Chain;Object.keys(object).map(function map(key){chain.and(object[key]).as(key)});return chain}function concat(){var args=Array.prototype.slice.call(arguments),primary=args.shift(),intermediary;intermediary=types.toString(primary);return intermediary.concat.apply(intermediary,args)}module.exports=types;module.exports.handle=handler.set;module.exports.promise=Promise;module.exports.when=module.exports.chain=when;module.exports.join=join;module.exports.fork=fork;module.exports.concat=concat;module.exports.wrap=module.exports.forward=wrap;module.exports.errorless=errorless;module.exports.succeed=module.exports.next=succeed;module.exports.fail=fail;module.exports.compose=compose;module.exports.version=require("./package.json").version;if(typeof window!=="undefined"&&typeof window.promix==="undefined"){window.promix=module.exports}},{"./package.json":2,"./lib/Chain":3,"./lib/Promise":4,"./lib/Handler":5,"./lib/types":6}],2:[function(require,module,exports){module.exports={name:"promix",description:"Mix promises with callbacks for improved control flow",version:"0.1.5",main:"./index",author:{name:"Pachet",email:"pachet@burninggarden.com"},repository:{type:"git",url:"https://github.com/reflex/promix.git"},keywords:["promise","control","flow","callback","when","then","futures"],license:"MIT",engines:{node:"*"},devDependencies:{nodeunit:"0.7.x","promises-aplus-tests":"*"},scripts:{test:"promises-aplus-tests aplus-adapter.js"},readmeFilename:"README.md"}},{}],5:[function(require,module,exports){var handler={set:function set(handle){this.handle=handle},handle:null};module.exports=handler},{}],3:[function(require,module,exports){var Promise=require("./promise"),Step=require("./step"),Reflector=require("./reflector"),handler=require("./handler"),utility=require("./utility");function Chain(){var self=this;this.time=0;this.steps=[];this.results=[];this.aliases={};this.alternate=false;this.stopped=false;this.silenced=false;this.rejected=false;this.endpoint=false;this.broken=false;this.slice=0;this.suppressed=0;this.position=0;this.focus=-1;this.introspects=0;this.name="none set";this.exports={and:function and(){self.add_promise.apply(self,Array.prototype.slice.call(arguments));if(self.focus===self.position){self.queue(self.steps[self.focus])}return self.exports},or:function or(){self.alternate=true;self.add_promise.apply(self,Array.prototype.slice.call(arguments));self.alternate=false;if(self.focus===self.position&&!self.stopped){self.queue(self.steps[self.focus])}return self.exports},name:function label(identifier){self.name=identifier;return self.exports},as:function as(text){self.label(self.focus,text);return self.exports},then:function then(interlocutor,secondary){var step,type=typeof secondary;if(utility.check_step(self.steps[self.focus])===false){self.add_step()}step=self.steps[self.focus];if(type==="undefined"||type==="function"&&secondary.then===undefined&&arguments.length===2){step.then=interlocutor;if(type==="function"){self.exports.otherwise(secondary)}}else{self.add_promise.apply(self,Array.prototype.slice.call(arguments))}step.endpoint=self.endpoint;self.endpoint=false;if(self.focus===self.position){self.queue(step)}return self.exports},assert:function assert(assertion){if(utility.check_step(self.steps[self.focus])===false){self.add_step()}self.steps[self.focus].assertion=assertion;return self.exports},otherwise:function otherwise(){var args=Array.prototype.slice.call(arguments);self.steps[self.focus].handler=args[0];if(args.length>1){self.steps[self.focus].error_arguments=args.slice(1)}return self.exports},suppress:function suppress(label){self.suppress(label,true);return self.exports},unsuppress:function suppress(label){self.suppress(label,false);return self.exports},reject:function reject(error){self.reject(error,self.position);return self.exports},callback:function callback(resolver){self.exports.otherwise(resolver);self.exports.then(function(results){return void resolver(null,results)});return self.exports},end:function end(){self.endpoint=true;self.exports.then.apply(self.exports,Array.prototype.slice.call(arguments));return self.exports},stop:function stop(){self.stopped=true;return self.exports},start:function start(){if(self.stopped){self.stopped=false;self.start()}return self.exports},"break":function _break(){self.broken=true;return self.exports},bind:function bind(context){self.bind(self.focus,context);return self.exports},until:function until(condition){self.steps[self.focus].condition=true;self.steps[self.focus].condition_value=condition;return self.exports},time:function time(label){var alias,index,total;if(typeof label!=="undefined"){if(typeof self.aliases[label]!=="undefined"){alias=self.aliases[label];if(alias.constructor===Step){return utility.find_max_time(alias)}else{return utility.get_item_time(alias)}}else{return null}}else{index=self.position;total=0;while(index--){total+=utility.find_max_time(self.steps[index])}return total}},results:this.results,result:this.results};this.add_step();if(arguments.length){this.add_promise.apply(this,Array.prototype.slice.call(arguments))}return this.exports}Chain.prototype={start:function start(){var step=this.steps[this.position];if(!step.completed&&this.broken===false){this.queue(step)}},queue:function queue(step){clearTimeout(step.dispatch_timer);step.dispatch_timer=setTimeout(function apply_queued_dispatch(){this.dispatch_step(step)}.bind(this),0)},bind:function bind(focus,context){var step=this.steps[focus],length,slice,slice_length,item;if(!step||step.completed===true){return}step.context=context;length=step.length;while(length--){slice=step[length];slice_length=slice.length;while(slice_length--){item=slice[slice_length];item.context=context}}},suppress:function suppress(label,state){switch(typeof label){case"undefined":this.suppressed=state;break;case"number":if(label){this.suppressed=label}break;case"string":if(typeof this.aliases[label]!=="undefined"){this.aliases[label].suppressed=state}break}},reject:function reject(error,offset){var length,original_offset=offset,step,args;if(this.rejected||this.suppressed){if(handler.handle){handler.handle(error)}return}length=this.steps.length;this.rejected=true;while(offset<length){step=this.steps[offset];if(step&&step.handler!==null){if(step.error_arguments){args=step.error_arguments.concat(error)}else{args=[error]}return void step.handler.apply(step.context||null,args)}offset++}offset=original_offset;while(offset--){step=this.steps[offset];if(step&&step.handler!==null){if(step.error_arguments){args=step.error_arguments.concat(error)}else{args=[error]}return void step.handler.apply(step.context||null,args)}}if(this.silenced===false){if(handler.handle){return void handler.handle(error)}else{throw error}}},complete:function complete(step){var assert_message,labels,index=0,length=step.length,current_result,current_focus=this.focus,resultant_promise,condition_match;if(this.rejected||this.broken){return}step.complete=true;this.focus=this.position;if(length>0){while(index<length){current_result=utility.get_slice_result(step[index]);this.results.push(current_result);if(typeof step[index].labels!=="undefined"){labels=step[index].labels.slice(0);while(labels.length){this.results[labels.shift()]=current_result;if(step.condition&&current_result===step.condition_value){condition_match=true}}}index++}}else if(typeof step.assertion==="function"&&step.assertion.call(step.context||null,this.results)===false){if(typeof step.label!=="undefined"){assert_message=step.label}else{assert_message=step.assertion.toString()}return void this.reject(new Error("Domain failed assertion: "+assert_message),this.position-1)}else if(typeof step.then==="function"){resultant_promise=step.then.call(step.context||null,this.results);if(typeof resultant_promise!=="undefined"){step.then=null;this.add_promise(resultant_promise);if(typeof step.label!=="undefined"){this.label(this.focus,step.label)}this.position--;current_focus--}}if(condition_match||!step.condition){this.position++}else if(step.condition_value&&typeof step.condition_value.then==="function"&&step.condition_bound===false){step.condition_bound=true;step.condition_value.then(function success(result){step.condition=false},this.exports.break)}if(this.position<this.steps.length){return void this.dispatch_step(this.steps[this.position])}},dispatch_step:function dispatch_step(step){var length=step.length,sub_index=0,sub_length,current_focus=this.focus,complete=this.complete.bind(this);this.focus=this.position;if(this.stopped===true||this.rejected===true){return}if(length){this.slice=0;while(this.slice<length){sub_index=0;sub_length=step[this.slice].length;while(sub_index<sub_length){this.apply_hooks.apply(this,[].concat(step[this.slice][sub_index]));sub_index++}this.slice++}}else{setTimeout(function(){return void complete(step)},0)}this.focus=current_focus},add_step:function add_step(){var step=new Step;this.steps.splice(++this.focus,0,step);return step},apply_hooks:function apply_hooks(promise){var offset=this.focus,step=this.steps[offset],current_slice=this.slice,invalid_promise,introspect_index,current_introspect,resolved_args,introspect_domain,introspect_arguments,introspect_primary,self=this,name=this.name,steps=this.steps,primary=null;function success(result){promise.finish=Date.now();step.complete_count++;if(step.complete_count>=step.length){return void self.complete(step)}}function failure(error){promise.finish=Date.now();if(promise.parent.suppressed||self.suppressed){if(!promise.parent.suppressed&&typeof self.suppressed==="number"){self.suppressed--}return void success(null)}return void self.reject(error,offset)}if(promise.arguments){primary=promise.arguments[0]}if(typeof primary==="function"){primary=Array.prototype.slice.call(promise.arguments)}if(Object.prototype.toString.call(primary)==="[object Array]"){introspect_index=1;while(introspect_index<primary.length){current_introspect=primary[introspect_index];if(current_introspect&&typeof current_introspect.then==="function"){introspect_index=1;introspect_domain=new Chain;while(introspect_index<primary.length){if(primary[introspect_index]!==undefined){introspect_domain.and(primary[introspect_index])}introspect_index++}introspect_primary=primary[0];introspect_domain.then(function composite_introspect(results){var args=[introspect_primary].concat(results);if(step.endpoint){introspect_domain.end.apply(introspect_domain,args)}else{introspect_domain.then.apply(introspect_domain,args).as("introspect")}if(promise.context){introspect_domain.bind(promise.context)}});introspect_domain.then(function fulfill_introspect(results){var immediate_result=introspect_domain.introspect.returned;if(promise.reflection){promise.reflection.returned=immediate_result}if(immediate_result&&typeof immediate_result.then==="function"){immediate_result.then(promise.fulfill,promise.reject)}return void promise.fulfill(results.introspect)});introspect_domain.otherwise(promise.reject);break}introspect_index++}if(!introspect_domain){resolved_args=promise.arguments.slice(0);primary=resolved_args.shift();if(step.condition){promise=new Promise(promise);step.complete_count=0}if(typeof primary==="function"){if(!step.endpoint){resolved_args.push(function resolve_promise(error,result){if(error){return void promise.reject(error)}else{return void promise.fulfill(result)}})}setTimeout(function dispatch_promise(){var result;result=primary.apply(promise.context||null,resolved_args);if(promise.reflection){promise.reflection.returned=result}if(result&&typeof result.then==="function"){result.then(promise.fulfill,promise.reject)}},0)}else{setTimeout(function fulfill_promise(){if(resolved_args.length){return void promise.fulfill([primary].concat(resolved_args))}else{return void promise.fulfill(primary)}},0)}}}else if((!primary||typeof primary.then!=="function")&&this.strict){invalid_promise=primary;setTimeout(function reject_promise(){var label_infix="";if(steps[offset][current_slice]&&steps[offset][current_slice].labels){label_infix=' (labelled "'+steps[offset][current_slice].labels[0]+'")'}return void promise.reject(new Error('The domain (named "'+name+'") was given an invalid promise'+label_infix+": "+invalid_promise))},0)}if(promise.constructor===Chain){promise.then(success).otherwise(failure)}else{promise.then(success,failure)}promise.start=Date.now()},add_promise:function add_promise(primary,secondary){var promise,step,args=Array.prototype.slice.call(arguments);if(typeof primary==="undefined"){return this.reject(new Error("Chain step value cannot be undefined."),this.position)}if(primary&&typeof primary.then==="function"){promise=primary}else{promise=new Promise;if(args.length===1&&typeof primary!=="function"){setTimeout(function resolve_immediately(){return void promise.fulfill(primary)},0)}else{promise.arguments=args}}step=this.steps[this.focus];if(step.assertion!==null||step.then!==null){step=this.add_step()}this.slice=step.length-1;if(this.alternate&&this.slice+1){step[this.slice].push(promise);promise.parent=step[this.slice]}else{promise.parent=[promise];this.slice=step.push(promise.parent)}},label:function label(index,text){var step_item;if(this.steps.length<index){return}step_item=this.steps[index];if(step_item.length===0){step_item.label=text;this.aliases[text]=step_item}else{step_item=step_item[step_item.length-1];if(typeof step_item.labels==="undefined"){step_item.labels=[]}step_item.labels.push(text);this.aliases[text]=step_item;if(this.reserved_identifiers.indexOf(text)===-1){this.exports[text]=new Reflector(step_item[step_item.length-1])}}}};Chain.prototype.reserved_identifiers=Object.keys(Chain.prototype);module.exports=Chain},{"./promise":7,"./step":8,"./reflector":9,"./handler":10,"./utility":11}],4:[function(require,module,exports){var handler=require("./handler");function copy(object){var result={};Object.keys(object).forEach(function each(key){result[key]=object[key]});return result}function Promise(base,clone){var children=[],fulfilled=false,rejected=false,result=null,error=null,exposure;function fulfill(resultant_result){var index,length,child;if(rejected||fulfilled){return}exposure.fulfilled=fulfilled=true;exposure.result=result=resultant_result;index=0;length=children.length;while(index<length){child=children[index];if(child.success){child.promise.resolve(child.success(result))}index++}}function reject(resultant_error){var result=false,index,length,child;if(fulfilled||rejected){return}exposure.rejected=rejected=true;exposure.error=error=resultant_error;index=0;length=children.length;while(index<length){child=children[index];if(child.failure){child.failure(error)}else{child.promise.reject(error)}index++;result=true}if(!result&&handler.handle){handler.handle(error)}}function then(success,failure){var promise=new Promise,success_is_function=typeof success==="function",failure_is_function=typeof failure==="function";if(fulfilled&&success_is_function){setTimeout(function deferred_success(){promise.fulfill(success(result))},0)}else if(rejected){setTimeout(function deferred_failure(){if(failure_is_function){failure(error)}else{promise.reject(error)}},0)}else{children.push({promise:promise,success:success_is_function?success:null,failure:failure_is_function?failure:null})}return promise}if(base&&clone===true){exposure=copy(base)}else{exposure=base||{}}exposure.reject=reject;exposure.resolve=fulfill;exposure.fulfill=fulfill;exposure.then=then;exposure.result=null;exposure.error=null;exposure.fulfilled=false;exposure.rejected=false;return exposure}module.exports=Promise},{"./handler":10}],6:[function(require,module,exports){var Promise=require("./Promise"),Chain=require("./Chain"),global_val=function(){return this}.call(null),promise_types,map,lookups,lookup,key,current,generator,prototype,prototypes={},generators={},property,index;function StringPromise(value){var promise=new Promise(new generators["String"]);promise.valueOf=lookups.String.valueOf;setTimeout(function(){if(value&&typeof value.then==="function"){value.then(promise.fulfill,promise.reject)}else{promise.fulfill(value)}},0);return promise}function ArrayPromise(value){var promise=new Promise(new generators["Array"]),chain=new Chain,args=Array.prototype.slice.call(arguments);promise.valueOf=lookups.Array.valueOf;function resolver(){return void promise.fulfill.apply(promise,Array.prototype.slice.call(arguments))}args.unshift(resolver);chain.end.apply(chain,args);chain.otherwise(promise.reject);return promise}function NumberPromise(value){var promise=new Promise(new generators["Number"]);promise.valueOf=lookups.Number.valueOf;setTimeout(function(){if(value&&typeof value.then==="function"){value.then(promise.fulfill,promise.reject)}else{promise.fulfill(+value)}},0);return promise}function BooleanPromise(value){}function ObjectPromise(value){var promise=new Promise(new generators["Object"]);promise.valueOf=lookups.Object.valueOf;setTimeout(function(){if(value&&typeof value.then==="function"){value.then(promise.fulfill,promise.reject)}else{promise.fulfill(value)}},0);return promise}promise_types={String:StringPromise,Array:ArrayPromise,Number:NumberPromise,Boolean:BooleanPromise,Object:ObjectPromise};lookups={String:{charAt:String.prototype.charAt,concat:String.prototype.concat,escape:global_val.escape,unescape:global_val.unescape,encodeURI:global_val.encodeURI,encodeURIComponent:global_val.encodeURIComponent,decodeURI:global_val.decodeURI,decodeURIComponent:global_val.decodeURIComponent,indexOf:String.prototype.indexOf,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split,slice:String.prototype.slice,substr:String.prototype.substr,substring:String.prototype.substring,toLowerCase:String.prototype.toLowerCase,toUpperCase:String.prototype.toUpperCase,trim:String.prototype.trim,length:function length(){return this.length},toFloat:function toFloat(){return parseFloat(this)},toInt:function toInt(radix){return parseInt(this,radix||10)},parse:function parse(){var result;try{result=JSON.parse(this)}catch(error){return error}return result},valueOf:function valueOf(){return"StringPromise"},get:function get(key){return this[key]},set:function set(key,value){this[key]=value;return this},"delete":function _delete(key){delete this[key];return this},keys:function keys(){return Object.keys(this)},toJSON:function toJSON(){return JSON.stringify(this)}},Array:{filter:Array.prototype.filter||function filter(callback,context){var index=0,length=this.length,current_result,results=[];while(index<length){current_result=callback.call(context,this[index]);if(current_result){results.push(current_result)}index++}},forEach:Array.prototype.forEach||function for_each(callback,context){var index=0,length=this.length;while(index<length){callback.call(context,this[index],index,this);index++}return this},map:Array.prototype.map||function(callback,context){var index=0,length=this.length,result=[];while(index<length){result.push(callback.call(context,this[index],index,this));index++}return result},pop:Array.prototype.pop,push:Array.prototype.push,reverse:Array.prototype.reverse,shift:Array.prototype.shift,sort:Array.prototype.sort,splice:Array.prototype.splice,unshift:Array.prototype.unshift,concat:Array.prototype.concat,join:Array.prototype.join,slice:Array.prototype.slice,toString:Array.prototype.toString,indexOf:Array.prototype.indexOf,lastIndexOf:Array.prototype.lastIndexOf,valueOf:function valueOf(){return"ArrayPromise"},get:function get(key){return this[key]},set:function set(key,value){this[key]=value;return this},"delete":function _delete(key){delete this[key];return this},keys:function keys(){return Object.keys(this)},toJSON:function toJSON(){return JSON.stringify(this)}},Number:{toFixed:Number.prototype.toFixed,toPrecision:Number.prototype.toPrecision,toLocaleString:Number.prototype.toLocaleString,toString:Number.prototype.toString,toExponential:Number.prototype.toExponential,valueOf:function valueOf(){return"NumberPromise"},plus:function plus(){var total=+this,index=arguments.length;while(index--){total+=arguments[index]}return total},minus:function minus(){var total=+this,index=arguments.length;while(index--){total-=arguments[index]}return total},times:function times(){var total=+this,index=arguments.length;while(index--){total*=arguments[index]}return total},divideBy:function divideBy(){var total=+this,index=arguments.length;while(index--){total/=arguments[index]}return total},round:function round(){return Math.round(+this)},ceil:function ceil(){return Math.ceil(+this)},floor:function floor(){return Math.floor(+this)},average:function averageWith(){var total=+this,index=0,length=arguments.length;while(index<length){total+=arguments[index];index++}return total/(length+1)},modulus:function modulus(divisor){return+this%divisor},pow:function pow(power){return Math.pow(+this,power)},abs:function abs(){return Math.abs(+this)},max:function max(){return Math.max.apply(Math,Array.prototype.slice.call(arguments).concat(+this))},min:function min(){return Math.min.apply(Math,Array.prototype.slice.call(arguments).concat(+this))},get:function get(key){return this[key]},set:function set(key,value){this[key]=value;return this},"delete":function _delete(key){delete this[key];return this},keys:function keys(){return Object.keys(this)},toJSON:function toJSON(){return JSON.stringify(this)}},Object:{get:function get(key){return this[key]},set:function set(key,value){this[key]=value;return this},"delete":function _delete(key){delete this[key];return this},keys:function keys(){return Object.keys(this)},values:function values(){var map=this;return Object.keys(map).map(function(property){return map[property]})},extend:function extend(target,source,overwrite){var key;if(typeof target==="undefined"||target===null){if(typeof source==="undefined"||source===null){return{}}return source}for(key in source){if(source.hasOwnProperty(key)){if(typeof target[key]==="undefined"||overwrite){target[key]=source[key]}}}return target},clone:function clone(original,deep){var key,property,type,result={};for(key in original){if(original.hasOwnProperty(key)){property=original[key];type=typeof property;if(type==="string"||type==="number"||type==="boolean"||type==="function"||property===null||property instanceof RegExp){result[key]=property}else if(Object.prototype.toString.call(property)==="[object Array]"){result[key]=deep?property.slice(0):property}else{result[key]=clone(property,deep)}}}return result},valueOf:function valueOf(){return"ObjectPromise"},toString:function toString(){return this.toString()},toNumber:function toNumber(){return+this},toArray:function toArray(){return[this]},toObject:function toObject(){return this},toJSON:function toJSON(){return JSON.stringify(this)}}};lookup=lookups.String;lookup.parseFloat=lookup.toFloat;lookup.parseInt=lookup.toInt;lookup.json=lookup.toJSON;lookup=lookups.Number;lookup.raiseTo=lookup.power=lookup.pow;lookup.add=lookup.plus;lookup.subtract=lookup.minus;lookup.multiply=lookup.times;lookup.divide=lookup.divideBy;lookup.mean=lookup.average;lookup.avg=lookup.average;lookup.mod=lookup.modulus;lookup.json=lookup.toJSON;lookup=lookups.Array;lookup.json=lookup.toJSON;lookup.each=lookup.forEach;lookup=lookups.Object;lookup.json=lookup.toJSON;lookup.copy=lookup.clone;map={String:[["escape","String"],["unescape","String"],["encodeURI","String"],["decodeURI","String"],["encodeURIComponent","String"],["decodeURIComponent","String"],["charAt","String"],["concat","String"],["indexOf","Number"],["length","Number"],["match","Array"],["replace","String"],["split","Array"],["slice","String"],["substr","String"],["substring","String"],["toLowerCase","String"],["toUpperCase","String"],["trim","String"],["toInt","Number"],["toFloat","Number"],["parseInt","Number"],["parseFloat","Number"],["get","Object"],["set","String"],["delete","String"],["keys","Array"],["parse","Object"],["toJSON","String"],["json","String"]],Array:[["map","Array"],["reduce","Object"],["filter","Array"],["each","Array"],["foreach","Array"],["pop","Object"],["push","Number"],["reverse","Array"],["shift","Object"],["sort","Array"],["splice","Array"],["unshift","Number"],["concat","Array"],["join","String"],["slice","Array"],["toString","String"],["indexOf","Number"],["lastIndexOf","Number"],["get","Object"],["set","Array"],["delete","Array"],["keys","Array"],["toJSON","String"],["json","String"]],Number:[["toFixed","String"],["toExponential","String"],["toLocaleString","String"],["toPrecision","String"],["toString","String"],["plus","Number"],["add","Number"],["minus","Number"],["subtract","Number"],["times","Number"],["multiply","Number"],["divideBy","Number"],["divide","Number"],["round","Number"],["ceil","Number"],["floor","Number"],["average","Number"],["mean","Number"],["modulus","Number"],["mod","Number"],["pow","Number"],["raiseTo","Number"],["power","Number"],["abs","Number"],["min","Number"],["max","Number"],["get","Object"],["set","Number"],["delete","Number"],["keys","Array"],["toJSON","String"],["json","String"]],Object:[["toString","String"],["toNumber","Number"],["toArray","Array"],["toJSON","String"],["json","String"],["get","Object"],["set","Object"],["values","Array"],["clone","Object"],["copy","Object"],["extend","Object"],["delete","Object"],["keys","Array"]]};for(key in map){if(map.hasOwnProperty(key)){current=map[key];prototype=prototypes[key]={};generators[key]=function(){};generators[key].prototype=prototype;index=current.length;while(index--){property=current[index][0];generator=promise_types[current[index][1]];lookup=lookups[key];prototype[property]=function create_definition(generator,property,lookup){return function abstracted_property(){var promise=generator(new Promise),args=Array.prototype.slice.call(arguments);function fulfill(result){var chain;if(typeof result==="undefined"||result===null||typeof lookup[property]==="undefined"){return void promise.reject(new TypeError("Promise result "+result+" has no property "+property))}if(typeof lookup[property]==="function"){args.unshift(function apply_property(){var continuation;continuation=lookup[property].apply(result,Array.prototype.slice.call(arguments,0,-1));promise.fulfill(continuation)});chain=new Chain;chain.and.apply(chain,args);chain.otherwise(promise.reject)}else if(typeof result[property]!=="undefined"){return void promise.fulfill(result[property])}}this.then(fulfill,promise.reject);return promise}}(generator,property,lookup)}}}module.exports={toString:StringPromise,toNumber:NumberPromise,toArray:ArrayPromise,toObject:ObjectPromise}},{"./Promise":4,"./Chain":3}],8:[function(require,module,exports){function Step(){this.complete=false;this.results=[];this.complete_count=0;this.then=null;this.handler=null;this.assertion=null;this.condition=false;this.condition_value=null;this.condition_bound=false}Step.prototype=[];module.exports=Step},{}],10:[function(require,module,exports){var handler={set:function set(handle){this.handle=handle},handle:null};module.exports=handler},{}],11:[function(require,module,exports){function get_slice_result(slice){var index=0,length=slice.length;while(index<length){if(slice[index].fulfilled===true){return slice[index].result}index++}return null}function check_step(step){return step.assertion===null&&step.then===null&&step.length===0}function get_item_time(item){item=item[item.length-1];if(!item.start){return 0}else{return(item.finish||Date.now())-item.start}}function find_max_time(step){var index=step.length,max=0,current;while(index--){current=get_item_time(step[index]);if(current>max){max=current}}return max}module.exports={get_slice_result:get_slice_result,check_step:check_step,get_item_time:get_item_time,find_max_time:find_max_time}},{}],7:[function(require,module,exports){var handler=require("./handler");function copy(object){var result={};Object.keys(object).forEach(function each(key){result[key]=object[key]});return result}function Promise(base,clone){var children=[],fulfilled=false,rejected=false,result=null,error=null,exposure;function fulfill(resultant_result){var index,length,child;if(rejected||fulfilled){return}exposure.fulfilled=fulfilled=true;exposure.result=result=resultant_result;index=0;length=children.length;while(index<length){child=children[index];if(child.success){child.promise.resolve(child.success(result))}index++}}function reject(resultant_error){var result=false,index,length,child;if(fulfilled||rejected){return}exposure.rejected=rejected=true;exposure.error=error=resultant_error;index=0;length=children.length;while(index<length){child=children[index];if(child.failure){child.failure(error)}else{child.promise.reject(error)}index++;result=true}if(!result&&handler.handle){handler.handle(error)}}function then(success,failure){var promise=new Promise,success_is_function=typeof success==="function",failure_is_function=typeof failure==="function";if(fulfilled&&success_is_function){setTimeout(function deferred_success(){promise.fulfill(success(result))},0)}else if(rejected){setTimeout(function deferred_failure(){if(failure_is_function){failure(error)}else{promise.reject(error)}},0)}else{children.push({promise:promise,success:success_is_function?success:null,failure:failure_is_function?failure:null})}return promise}if(base&&clone===true){exposure=copy(base)}else{exposure=base||{}}exposure.reject=reject;exposure.resolve=fulfill;exposure.fulfill=fulfill;exposure.then=then;exposure.result=null;exposure.error=null;exposure.fulfilled=false;exposure.rejected=false;return exposure}module.exports=Promise},{"./handler":10}],9:[function(require,module,exports){var Promise=require("./promise");function Reflector(deferred){var reflect=new Promise(function reflect(identifier){var subpromise=new Promise;function success(result){var value;if(result){if(typeof identifier==="undefined"){value=result}else{value=result[identifier]}}else{value=null}return void subpromise.fulfill(value)}function failure(error){return void subpromise.reject(error)}deferred.then(success,failure);return subpromise});deferred.reflection=reflect;deferred.then(reflect.fulfill,reflect.reject);return reflect}module.exports=Reflector
},{"./promise":7}]},{},[1]);